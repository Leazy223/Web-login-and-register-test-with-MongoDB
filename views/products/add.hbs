<h1>Create Product</h1>

{{#if errors.general}}
  <p style="color:red">{{errors.general}}</p>
{{/if}}

<form action="/products/add" method="post" enctype="multipart/form-data">
  <label for="name">Name</label><br />
  <input id="name" name="name" value="{{#if product}}{{product.name}}{{/if}}" required /><br /><br />
  {{#if errors.name}}
    <p style="color:red">{{errors.name}}</p>
  {{/if}}

  <label for="price">Price</label><br />
  <input id="price" name="price" type="number" step="0.01" value="{{#if product}}{{product.price}}{{/if}}" required /><br /><br />
  {{#if errors.price}}
    <p style="color:red">{{errors.price}}</p>
  {{/if}}

  <label for="image">Image</label><br />
  {{#if errors.image}}
    <p style="color:red">{{errors.image}}</p>
  {{/if}}
  <input id="image" name="image" type="file" accept="image/*" /><br /><br />

  <label for="category">Category</label><br />
  <select id="category" name="category" required>
    <option value="" disabled {{#unless product}}selected{{/unless}}>Choose a category</option>
    {{#each categories}}
      <option value="{{this._id}}"
        {{#if ../product}}
          {{#if (eq this._id ../product.category)}}selected{{else}}{{#if (eq this._id ../product.category._id)}}selected{{/if}}{{/if}}
        {{/if}}
      >{{this.name}}</option>
    {{/each}}
  </select>
  <br /><br />
  {{#if errors.category}}
    <p style="color:red">{{errors.category}}</p>
  {{/if}}

  <button type="submit">Create</button>
  <a href="/products">Cancel</a>
</form>
