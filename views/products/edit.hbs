<h1>Edit Product</h1>

{{#if errors.general}}
  <p style="color:red">{{errors.general}}</p>
{{/if}}

{{#if errors.image}}
  <p style="color:red">{{errors.image}}</p>
{{/if}}

<form action="/products/edit/{{product._id}}" method="post" enctype="multipart/form-data">
  <label for="name">Name</label><br />
  <input id="name" name="name" value="{{product.name}}" required /><br /><br />

  <label for="price">Price</label><br />
  <input id="price" name="price" type="number" step="0.01" value="{{product.price}}" required /><br /><br />

  <label for="image">Image</label><br />
  {{#if product.image}}
    <img src="/images/{{product.image}}" alt="{{product.name}}" style="max-width: 200px"><br />
  {{/if}}
  <input id="image" name="image" type="file" accept="image/*" /><br /><br />

  <label for="category">Category</label><br />
  <select id="category" name="category" required>
    <option value="" disabled>Choose a category</option>
    {{#each categories}}
      <option value="{{this._id}}"
        {{#if (eq this._id ../product.category)}}selected{{else}}{{#if (eq this._id ../product.category._id)}}selected{{/if}}{{/if}}
      >{{this.name}}</option>
    {{/each}}
  </select>
  <br /><br />

  <button type="submit">Save</button>
  <a href="/products">Cancel</a>
</form>
